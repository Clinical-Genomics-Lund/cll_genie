(this["webpackJsonpcdm-trends"]=this["webpackJsonpcdm-trends"]||[]).push([[0],{441:function(t,e,a){"use strict";a.r(e);var n=a(3),s=a.n(n),r=a(17),c=a.n(r),i=a(45),o=a(6),u=a.n(o),l=a(21),p=a(1),m=function(t){var e=t.classNames,a=t.onChange,n=t.options,s=t.selectedOption;return Object(p.jsxs)("select",{className:e.join(" "),onChange:a,value:null===s?"default":s,children:[Object(p.jsx)("option",{value:"default",disabled:!0,children:"Select analysis"}),null!==n&&n.map((function(t){return Object(p.jsx)("option",{value:t.value,children:t.label},t.value)}))]})},d=a(131),f=function(t){var e=t.text,a=t.classNames,n=t.onClick,s=t.disabled,r=["btn"].concat(Object(d.a)(a)).join(" ");return Object(p.jsx)("button",{className:r,onClick:n,disabled:s,children:e})};f.defaultProps={classNames:[],disabled:!1};var x=f,y=function(t){var e=t.assayNames,a=t.onChange,n=t.onClick,s=t.selectedAssay,r=t.selectedTimeInterval,c=[{title:"All",monthDelta:null},{title:"3 Years",monthDelta:-36},{title:"1 Year",monthDelta:-12},{title:"6 Mon",monthDelta:-6}];return Object(p.jsxs)("div",{className:"data-selection",children:[Object(p.jsx)(m,{classNames:["test"],onChange:a,options:e,selectedOption:s}),c.map((function(t){return Object(p.jsx)(x,{text:t.title,onClick:function(){n(t.monthDelta)},disabled:t.monthDelta===r})}))]})},b=a(128),j=a.n(b),h=function(t){var e=t.plotData,a=t.assay;return[{title:"Medelt\xe4ckning",assays:["all"],yaxis:{title:"X coverage"},xaxis:{title:"Datum"},plotData:{plotType:"scatter",mode:"markers",x:e.map((function(t){return t.creation_date})),y:e.map((function(t){return parseFloat(t.qc.mean_coverage)})),text:e.map((function(t){return"sample id: ".concat(t["sample-id"],"; sub-assay: ").concat(t.subassay)}))}},{title:"Fragmentstorlek",assays:["all"],yaxis:{title:"base pairs"},xaxis:{title:"Datum"},plotData:{plotType:"scatter",mode:"markers",x:e.map((function(t){return t.creation_date})),y:e.map((function(t){return parseInt(t.qc.ins_size)})),text:e.map((function(t){return"sample id: ".concat(t["sample-id"],"; sub-assay: ").concat(t.subassay)}))}},{title:"Duplikation m\xe4ngd",assays:["all"],yaxis:{title:"% duplication"},xaxis:{title:"Datum"},plotData:{plotType:"scatter",mode:"markers",x:e.map((function(t){return t.creation_date})),y:e.map((function(t){return parseFloat(t.qc.dup_pct)})),text:e.map((function(t){return"sample id: ".concat(t["sample-id"],"; sub-assay: ").concat(t.subassay)}))}},{title:"GC-drop",assays:["wgs"],yaxis:{title:"%"},xaxis:{title:"Datum"},plotData:{plotType:"scatter",mode:"markers",x:e.map((function(t){return t.creation_date})),y:e.map((function(t){return parseFloat(t.qc.gc_drop)})),text:e.map((function(t){return"sample id: ".concat(t["sample-id"],"; sub-assay: ").concat(t.subassay)}))}},{key:5,title:"AT-drop",assays:["wgs"],yaxis:{title:"%"},xaxis:{title:"Datum"},plotData:{plotType:"scatter",mode:"markers",x:e.map((function(t){return t.creation_date})),y:e.map((function(t){return parseFloat(t.qc.at_drop)})),text:e.map((function(t){return"sample id: ".concat(t["sample-id"],"; sub-assay: ").concat(t.subassay)}))}},{title:"Felfrekvens",assays:["wgs"],yaxis:{title:"%"},xaxis:{title:"Datum"},plotData:{plotType:"scatter",mode:"markers",x:e.map((function(t){return t.creation_date})),y:e.map((function(t){return parseFloat(t.qc.pf_error_rate)})),text:e.map((function(t){return"sample id: ".concat(t["sample-id"],"; sub-assay: ").concat(t.subassay)}))}},{title:"Kontamination",assays:["exome"],yaxis:{title:"%"},xaxis:{title:"Datum"},plotData:{plotType:"scatter",mode:"markers",x:e.map((function(t){return t.creation_date})),y:e.map((function(t){return parseFloat(t.qc.contamination)})),text:e.map((function(t){return"sample id: ".concat(t["sample-id"],"; sub-assay: ").concat(t.subassay)}))}}].map((function(t){return(t.assays.includes("all")||t.assays.includes(a))&&Object(p.jsx)("div",{className:"plot",children:Object(p.jsx)(j.a,{data:[t.plotData],layout:{title:t.title,xaxis:t.xaxis,yaxis:t.yaxis}})})}))};h.defaultProps={plotData:[]};var v=h;function O(t,e){return k.apply(this,arguments)}function k(){return(k=Object(l.a)(u.a.mark((function t(e,a){var n,s,r,c,i=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:"GET",s={method:n,headers:{"Content-Type":"application/json"}},a&&("GET"===n?e+="?"+w(a):s.body=JSON.stringify(a)),t.next=5,fetch(e,s);case 5:if(200===(r=t.sent).status){t.next=8;break}return t.abrupt("return",D("The server responded with an unexpected status."));case 8:return t.next=10,r.json();case 10:return c=t.sent,t.abrupt("return",c);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function w(t){return Object.keys(t).map((function(e){return e+"="+t[e]})).join("&")}function D(t){return new Error({status:"error",message:t})}function g(t,e){return O(t,e)}a(141);var _="http://mtlucmds1.lund.skane.se/cdm/api",T=function(){var t=Object(l.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(_,"/assays"));case 2:return e=t.sent,t.abrupt("return",e.json());case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),C=function(){var t=Object(l.a)(u.a.mark((function t(e){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g("".concat(_,"/samples"),e);case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),N=function(){var t=new URLSearchParams(window.location.search),e=Object(n.useState)(null),a=Object(i.a)(e,2),s=a[0],r=a[1],c=Object(n.useState)(null),o=Object(i.a)(c,2),m=o[0],d=o[1],f=Object(n.useState)(t.get("assay")),x=Object(i.a)(f,2),b=x[0],j=x[1],h=Object(n.useState)(null),O=Object(i.a)(h,2),k=O[0],w=O[1];Object(n.useEffect)((function(){(function(){var t=Object(l.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T();case 2:e=t.sent,r(e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]);var D=function(){var t=Object(l.a)(u.a.mark((function t(e){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.target.value,j(a),g(a);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),g=function(){var t=Object(l.a)(u.a.mark((function t(e){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C({assay:e,has_qc:!0});case 2:a=t.sent,d(a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),_=function(){var t=Object(l.a)(u.a.mark((function t(e){var a,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w(e),t.next=3,C({assay:b,has_qc:!0});case 3:a=t.sent,null===e?d(a):((n=new Date).setMonth(n.getMonth()+e),d(a.filter((function(t){return n<new Date(t.creation_date)}))));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){null!==b&&g(b)}),[]),Object(p.jsxs)("div",{className:"container",children:[Object(p.jsxs)("h2",{children:["Quality trends",null!==b&&": ".concat(b)]}),Object(p.jsx)(y,{assayNames:s,onChange:D,onClick:_,selectedAssay:b,selectedTimeInterval:k}),null!==m?Object(p.jsx)(v,{plotData:m,assay:b}):Object(p.jsx)("div",{children:"Please select an assay to show plots"})]})};c.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(N,{})}),document.getElementById("root"))}},[[441,1,2]]]);
//# sourceMappingURL=main.a14b485e.chunk.js.map